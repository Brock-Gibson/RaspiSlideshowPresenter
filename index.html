<!DOCTYPE html>
<html>
    <head>
        <title>PiPresents</title>
            <script src="moment.js" type="text/javascript"></script><!-- Links to various libraries-->
            <script src="jquery.js" type=text/javascript></script>
            <script src="jquery.simpleWeather.min.js" type="text/javascript"></script>
            <link rel="stylesheet" href="w3.css">

        <style>

            #ourmanna-verse {
                text-align: right;
            }

            #mannaverse {
                font-size: 20px;
                font-weight: bold;
                padding-top: 3em;
            }

            .mySlides {display:none;
            height:720px;
            width:1280px;
            }
            .cycle-slideshow { width: 80% }
            .cycle-slideshow img { width: 100%; height: auto;  }
        </style>
    </head>

    <body>

        <div class="w3-cell-row">

            <div  id="alpha" class="w3-cell cycle-slideshow">

            <img class="mySlides" src="http://via.placeholder.com/1920x1080">
            <img class="mySlides" src="images/4.jpg">

            </div>

            <div class="w3-container w3-grey w3-white" >
                <div id="ourmanna-verse">Loading...</div>
                <script src="http://www.ourmanna.com/verses/api/js/" type="text/javascript"></script>
            </div>

            <div class="w3-container w3-padding-16">
                    <span id="time" class="w3-right w3-xlarge"> </span>
            </div>

        </div>

        <div class="w3-cell-row" >
            <div id="weather" class="w3-container w3-blue w3-cell" >
                <a class="weatherwidget-io" href="https://forecast7.com/en/38d95n92d33/columbia/?unit=us" data-label_1="COLUMBIA" data-label_2="WEATHER" data-font="Verdana" data-theme="clear" data-basecolor="#2196F3" data-textcolor="#fcf5f5" data-highcolor="#ff851c" data-suncolor="#ff8d2c" >COLUMBIA WEATHER</a>
                <script>
                !function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0];if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src='https://weatherwidget.io/js/widget.min.js';fjs.parentNode.insertBefore(js,fjs);}}(document,'script','weatherwidget-io-js');
                </script>
            </div>
        </div>


        <script>
            var myIndex = 0;
            carousel();
            var folder =""
        //added here
            //function for slideshow
            function carousel() {
                var i;
                var x = document.getElementsByClassName("mySlides");
                for (i = 0; i < x.length; i++) {
                   x[i].style.display = "none";
                }
                myIndex++;
                if (myIndex > x.length) {myIndex = 1}
                x[myIndex-1].style.display = "block";
                setTimeout(carousel, 2000); // Change image every 2 seconds
            }

            //script for reading files
            $(document).ready(function(){
                var folder="Content/";

            $.ajax({
                url: folder,
                success: function (data) {
                $(data).find("a").attr("href", function (i, val){
                    if (val.match(/\.(jpeg|png|gif|jpg|JPG|PNG|GIF|JPEG)$/) ){
                        $("#alpha").append( "<div class='w3-left'>" + "<div class='w3-cell cycle-slideshow'>" +
                                         "<img class='mySlides'  style='height:auto;' src=" + folder + val +">" +
                                         "</div>" + "</div>");
                            }
                        });
                    }
                });
             });

            //automatically refresh page
            function AutoRefresh( t ) {
               setTimeout("location.reload(true);", t);
            }

            //gets rid of scroll bars
            function unloadScrollBars() {
                document.documentElement.style.overflow = 'hidden';  // firefox, chrome
                document.body.scroll = "no"; // ie only
            }

            function AutoRefresh( t ) {
               setTimeout("location.reload(true);", t);
            }

            window.onload=function(){
                unloadScrollBars();
                AutoRefresh(60000 * 60);
                //AutoRefresh(60000 * 1);//refresh every minute
            }


            //script for clock
              $(document).ready(function(){
                var time = $('#time'),
                    update = function(){
                               time.html(moment().format('h:mm A') + '<br>' + moment().format('MMMM Do YYYY'));
                             };
                update();
                setInterval(update, 1000);
              });


        </script>

    </body>
</html>
