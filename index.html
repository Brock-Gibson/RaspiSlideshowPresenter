<!DOCTYPE html>
<html>
    <head>
        <title>PiPresents</title>
            <script src="moment.js" type="text/javascript"></script>
            <script src="jquery.js" type=text/javascript></script>
            <script src="jquery.simpleWeather.min.js" type="text/javascript"></script>
            <link rel="stylesheet" href="w3.css">

        <style>
            .mySlides {display:none;}
            .cycle-slideshow { width: 80% }
            .cycle-slideshow img { width: 100%; height: auto }
        </style>
    </head>

    <body>
        <div class="w3-cell-row">
            <div class="w3-cell cycle-slideshow">
            <img class="mySlides" src="http://via.placeholder.com/1920x1080">
            <img class="mySlides" src="images/4.jpg">
            <img class="mySlides" src="images/5.jpg">
            <img class="mySlides" src="images/6.jpg">
            <img class="mySlides" src="images/7.jpg">
            <img class="mySlides" src="images/8.jpg">
            </div>

            <div class="w3-container w3-grey w3-cell" >
            </div>

        </div>
        <div class="w3-cell-row" >
            <div id="weather" class="w3-container w3-blue w3-cell" >
            </div>

            <div class="w3-container w3-blue w3-cell w3-cell-middle w3-xlarge">
                <span id="time"> </span>
                <span id="date"> </span>
            </div>
        </div>

        <script>

            function unloadScrollBars() {
                document.documentElement.style.overflow = 'hidden';  // firefox, chrome
                document.body.scroll = "no"; // ie only
            }

            function AutoRefresh( t ) {
               setTimeout("location.reload(true);", t);
            }

            window.onload=function(){
                unloadScrollBars();
                AutoRefresh(60000 * 60);
                //AutoRefresh(60000 * 1);//refresh every minute
            }

            var myIndex = 0;
            carousel();

            function carousel() {
                var i;
                var x = document.getElementsByClassName("mySlides");
                for (i = 0; i < x.length; i++) {
                   x[i].style.display = "none";
                }
                myIndex++;
                if (myIndex > x.length) {myIndex = 1}
                x[myIndex-1].style.display = "block";
                setTimeout(carousel, 4000); // Change image every 2 seconds
            }


              $(document).ready(function(){
                var time = $('#time'),
                    update = function(){
                               time.html(moment().format('h:mm A') + '<br>' + moment().format('MMMM Do YYYY'));
                             };
                update();
                setInterval(update, 1000);
              });


            $(document).ready(function() {
                  getWeather(); //Get the initial weather.
                  setInterval(getWeather, 30000); //Update the weather every 5 minutes.
                });

                function getWeather() {
                  $.simpleWeather({
                    location: '65201',
                    unit: 'f',
                    success: function(weather) {
                      html = '<h2 class="w3-jumbo w3-cell w3-cell-middle">'+weather.temp+'&deg;'+weather.units.temp+' in ';
                      html += ''+weather.city+', '+weather.region+'</h2>';

                      var timestamp = moment(weather.updated);
                      html += '<p>Weather updated '+moment(timestamp).fromNow()+' ';

                      html += ' at '+moment(timestamp).format('MM/DD/YYYY h:mma')+'</p>';

                      $("#weather").html(html);
                    },
                    error: function(error) {
                      $("#weather").html('<p>'+error+'</p>');
                    }
                  });
                }

        </script>

    </body>
</html>
