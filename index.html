<!DOCTYPE html>
<html>
    <head>
        <title>PiPresents</title>
            <script src="moment.js" type="text/javascript"></script><!-- Links to various libraries-->
            <script src="jquery.js" type=text/javascript></script>
            <script src="jquery.simpleWeather.min.js" type="text/javascript"></script>
            <link rel="stylesheet" href="w3.css">

        <style>

            .mySlides {display:none;
            height:720px;
            width:1280px;
            }
            .cycle-slideshow { width: 80% }
            .cycle-slideshow img { width: 100%; height: auto;  }
        </style>
    </head>

    <body>

        <div class="w3-cell-row">

            <div  id="alpha" class="w3-cell cycle-slideshow">

            <img class="mySlides" src="http://via.placeholder.com/1920x1080">
            <img class="mySlides" src="images/4.jpg">

            </div>

            <div class="w3-container w3-grey w3-cell" >
            </div>



        </div>

        <div class="w3-cell-row" >
            <div id="weather" class="w3-container w3-blue w3-cell" >
            </div>

            <div class="w3-container w3-blue w3-cell w3-cell-middle w3-xlarge">
                <span id="time"> </span>
                <span id="date"> </span>
            </div>
        </div>


        <script>
            var myIndex = 0;
            carousel();
            var folder =""
        //added here
            //function for slideshow
            function carousel() {
                var i;
                var x = document.getElementsByClassName("mySlides");
                for (i = 0; i < x.length; i++) {
                   x[i].style.display = "none";
                }
                myIndex++;
                if (myIndex > x.length) {myIndex = 1}
                x[myIndex-1].style.display = "block";
                setTimeout(carousel, 5000); // Change image every 2 seconds
            }

            //script for reading files
            $(document).ready(function(){
                var folder="Content/";

            $.ajax({
                url: folder,
                success: function (data) {
                $(data).find("a").attr("href", function (i, val){
                    if (val.match(/\.(jpeg|png|gif|jpg|JPG|PNG|GIF|JPEG)$/) ){
                        $("#alpha").append( "<div class='w3-left'>" + "<div class='w3-cell cycle-slideshow'>" +
                                         "<img class='mySlides'  style='height:auto;' src=" + folder + val +">" +
                                         "</div>" + "</div>");
                            }
                        });
                    }
                });
             });

            //automatically refresh page
            function AutoRefresh( t ) {
               setTimeout("location.reload(true);", t);
            }

            //gets rid of scroll bars
            function unloadScrollBars() {
                document.documentElement.style.overflow = 'hidden';  // firefox, chrome
                document.body.scroll = "no"; // ie only
            }

            function AutoRefresh( t ) {
               setTimeout("location.reload(true);", t);
            }

=======
>>>>>>> origin/feature/slideshow
            window.onload=function(){
                unloadScrollBars();
                AutoRefresh(60000 * 60);
                //AutoRefresh(60000 * 1);//refresh every minute
            }


            //script for clock
              $(document).ready(function(){
                var time = $('#time'),
                    update = function(){
                               time.html(moment().format('h:mm A') + '<br>' + moment().format('MMMM Do YYYY'));
                             };
                update();
                setInterval(update, 1000);
              });

            //script for weather
            $(document).ready(function() {
                  getWeather(); //Get the initial weather.
                  setInterval(getWeather, 5000); //Update the weather every 5 minutes.
                });

            function getWeather() {
                  $.simpleWeather({
                    location: '65201',
                    unit: 'f',
                    success: function(weather) {
                      html = '<h2 class="w3-jumbo w3-cell w3-cell-middle">'+weather.temp+'&deg;'+weather.units.temp+' in ';
                      html += ''+weather.city+', '+weather.region+'</h2>';

                      var timestamp = moment(weather.updated);
                      html += '<p>Weather updated '+moment(timestamp).fromNow()+' ';

                      html += ' at '+moment(timestamp).format('MM/DD/YYYY h:mma')+'</p>';

                      $("#weather").html(html);
                    },
                    error: function(error) {
                      $("#weather").html('<p>'+error+'</p>');
                    }
                  });
                }

        </script>

    </body>
</html>
